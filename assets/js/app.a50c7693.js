(function(e){function t(t){for(var a,o,s=t[0],c=t[1],u=t[2],l=0,m=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);g&&g(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/agileengine-image-gallery/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var g=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1166:function(e,t,n){"use strict";var a=n("f5fd"),r=n.n(a);r.a},"16a8":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("h2",{staticClass:"title"},[e._v("AgileEngine Image Gallery")]),e.currentImage?n("image-modal",{attrs:{index:e.currentIndex,images:e.images,"current-image":e.currentImage,"fetching-image":e.isFetchingCurrentImage,"has-previous":e.hasPreviousImage,"has-next":e.hasNextImage},on:{close:function(t){return e.resetCurrentImage()},next:function(t){return e.fetchNextImage()},prev:function(t){return e.fetchPrevImage()}}}):e._e(),e.isFetchingGalleryImages?n("loading-dots",{attrs:{theme:"dark"}}):n("div",{staticClass:"image-gallery"},[n("div",{staticClass:"image-gallery__content"},e._l(e.images,(function(t,a){return n("img",{key:a,attrs:{src:t.cropped_picture,alt:"image-"+t.id},on:{click:function(t){return e.openImageModal(a)}}})})),0),n("pagination",{attrs:{"current-page":e.pagination.page,pages:e.pagination.pageCount},on:{changePage:e.fetchGalleryImages}})],1)],1)},i=[],o=(n("96cf"),n("1da1")),s=n("5530"),c=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-modal"},[n("div",{staticClass:"image-modal__overlay"},[n("loading-dots",{directives:[{name:"show",rawName:"v-show",value:e.fetchingImage,expression:"fetchingImage"}]}),n("div",{staticClass:"image-modal__container"},[n("ul",{staticClass:"image-modal__content"},e._l(e.images,(function(t,a){return n("li",{key:a,staticClass:"image-modal__image-container",style:"transform: translate3d("+-100*e.index+"%, 0px, 0px);"},[n("div",{ref:"image-"+t.id+"-container",refInFor:!0,staticClass:"image-modal__image-content"},[n("img",{ref:"image-"+t.id,refInFor:!0,attrs:{src:!e.fetchingImage&&a===e.index&&e.currentImage.full_picture}})])])})),0)]),n("div",{staticClass:"image-modal__image-information"},[n("h4",{staticClass:"image-modal__image-information-title"},[e._v(" "+e._s(e.currentImage.author)+" ~ "+e._s(e.currentImage.camera)+" ")]),n("p",{staticClass:"image-modal__image-information-subtitle"},[e._v(" "+e._s(e.currentImage.tags)+" ")])]),e.hasPrevious?n("button",{staticClass:"image-modal__button image-modal__button--prev",on:{click:function(t){return e.goToPrevImage()}}},[n("v-icon",{attrs:{name:"arrow-left",scale:"1.5"}})],1):e._e(),e.hasNext?n("button",{staticClass:"image-modal__button image-modal__button--next",on:{click:function(t){return e.goToNextImage()}}},[n("v-icon",{attrs:{name:"arrow-right",scale:"1.5"}})],1):e._e(),n("div",{staticClass:"image-modal__top-buttons"},[n("button",{staticClass:"image-modal__button",on:{click:function(t){return e.closeModal()}}},[n("v-icon",{attrs:{name:"times",scale:"1.5"}})],1),n("button",{staticClass:"image-modal__button",on:{click:function(t){return e.zoomIn()}}},[n("v-icon",{attrs:{name:"search-plus",scale:"1.5"}})],1),n("button",{staticClass:"image-modal__button",on:{click:function(t){return e.zoomOut()}}},[n("v-icon",{attrs:{name:"search-minus",scale:"1.5"}})],1),n("button",{staticClass:"image-modal__button",on:{click:function(t){return e.togglePanning()}}},[n("v-icon",{attrs:{name:e.panning.isActive?"hand-paper":"hand-rock",scale:"1.5"}})],1)])],1)])},g=[],l=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading-dots"},e._l(3,(function(t){return n("div",{key:t,class:"loading-dots__dot loading-dots__dot--"+e.theme})})),0)}),m=[],f={props:{theme:{type:String,default:"light"}}},d=f,p=(n("1166"),n("2877")),h=Object(p["a"])(d,l,m,!1,null,"7a767b49",null),v=h.exports,I={components:{LoadingDots:v},props:{index:{type:Number,default:1},images:{type:Array,default:function(){return[]},required:!0},currentImage:{type:Object,default:function(){},required:!0},fetchingImage:{type:Boolean,default:!1},hasPrevious:{type:Boolean,required:!0},hasNext:{type:Boolean,required:!0}},data:function(){return{bodyOverflowStyle:"",panning:{isActive:!1,isDragging:null,offsetX:null,offsetY:null,coordX:null,coordY:null}}},mounted:function(){this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden",document.addEventListener("keydown",this.keyDownHandler,!1)},destroyed:function(){var e;document.body.style.overflow=null!==(e=this.bodyOverflowStyle)&&void 0!==e?e:"scroll",document.removeEventListener("keydown",this.keyDownHandler,!1)},methods:{closeModal:function(){this.$emit("close")},goToPrevImage:function(){this.$emit("prev")},goToNextImage:function(){this.$emit("next")},zoomIn:function(){var e=this.$refs["image-".concat(this.currentImage.id)][0];e.style.width=e.clientWidth+150+"px"},zoomOut:function(){var e=this.$refs["image-".concat(this.currentImage.id)][0];e.style.width=e.clientWidth-150+"px"},togglePanning:function(){this.panning.isActive=!this.panning.isActive;var e=this.$refs["image-".concat(this.currentImage.id,"-container")][0];this.panning.isActive?(e.classList.add("panning"),e.onmousedown=this.startDrag,e.onmouseup=this.stopDrag):(e.onmousedown=null,e.onmouseup=null,e.onmousemove=null)},keyDownHandler:function(e){switch(e.keyCode){case"37":this.goToPrevImage();break;case"39":this.goToNextImage();break;case"27":this.closeModal();break;default:break}},startDrag:function(e){var t=this.$refs["image-".concat(this.currentImage.id,"-container")][0];this.panning.offsetX=e.clientX,this.panning.offsetY=e.clientY,t.style.left||(t.style.left="0px"),t.style.top||(t.style.top="0px"),this.panning.coordX=parseInt(t.style.left),this.panning.coordY=parseInt(t.style.top),this.panning.isDragging=!0,t.onmousemove=this.dragDiv},dragDiv:function(e){var t=this.$refs["image-".concat(this.currentImage.id,"-container")][0];if(this.panning.isDragging)return t.style.left=this.panning.coordX+e.clientX-this.panning.offsetX+"px",t.style.top=this.panning.coordY+e.clientY-this.panning.offsetY+"px",!1},stopDrag:function(){return this.panning.isDragging=!1,!1}}},b=I,_=(n("af7d"),Object(p["a"])(b,u,g,!1,null,"790f9e39",null)),y=_.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"pagination"},[n("ul",[n("li",[n("a",{on:{click:function(t){return e.changePage(1)}}},[e._v("«")])]),n("li",e._l(e.pages,(function(t){return n("a",{key:t,class:t===e.currentPage&&"active",on:{click:function(n){return e.changePage(t)}}},[e._v(" "+e._s(t)+" ")])})),0),n("li",[n("a",{on:{click:function(t){return e.changePage(e.pages)}}},[e._v("»")])])])])},w=[],k={props:{currentPage:{type:Number,required:!0},pages:{type:Number,required:!0}},methods:{changePage:function(e){this.$emit("changePage",e)}}},C=k,O=(n("71e3"),Object(p["a"])(C,x,w,!1,null,"0ca832e2",null)),P=O.exports,j={name:"app",components:{ImageModal:y,Pagination:P,LoadingDots:v},data:function(){return{currentIndex:null,isFetchingCurrentImage:!1,isFetchingGalleryImages:!1}},created:function(){this.fetchGalleryImages()},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({images:function(e){return e.images.images},pagination:function(e){return e.images.pagination},currentImage:function(e){return e.images.currentImage}})),{},{hasPreviousImage:function(){return this.pagination.page>1||this.currentIndex>0},hasNextImage:function(){return this.pagination.hasMore||this.currentIndex<this.images.length-1}}),methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])("images",{fetchImages:"fetchImages",fetchImage:"fetchImage",resetCurrentImage:"resetImage"})),{},{openImageModal:function(e){this.currentIndex=e,this.fetchCurrentImage()},fetchPrevImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.currentIndex>0)){t.next=5;break}e.currentIndex-=1,e.fetchCurrentImage(),t.next=10;break;case 5:if(!(e.pagination.page>1)){t.next=10;break}return t.next=8,e.fetchGalleryImages(e.pagination.page-1);case 8:e.currentIndex=e.images.length-1,e.fetchCurrentImage();case 10:case"end":return t.stop()}}),t)})))()},fetchNextImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.currentIndex<e.images.length-1)){t.next=5;break}e.currentIndex+=1,e.fetchCurrentImage(),t.next=10;break;case 5:if(!e.pagination.hasMore){t.next=10;break}return t.next=8,e.fetchGalleryImages(e.pagination.page+1);case 8:e.currentIndex=0,e.fetchCurrentImage();case 10:case"end":return t.stop()}}),t)})))()},fetchCurrentImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isFetchingCurrentImage=!0,t.next=3,e.fetchImage(e.images[e.currentIndex].id);case 3:e.isFetchingCurrentImage=!1;case 4:case"end":return t.stop()}}),t)})))()},fetchGalleryImages:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isFetchingGalleryImages=!0,n.next=3,t.fetchImages(e);case 3:t.isFetchingGalleryImages=!1;case 4:case"end":return n.stop()}}),n)})))()}})},E=j,T=(n("5c0b"),Object(p["a"])(E,r,i,!1,null,null,null)),M=T.exports,S=n("fbac"),N=(n("99af"),n("d3b7"),n("bc3a")),R=n.n(N),D=n("a7fe"),G=n.n(D),A={init:function(){a["a"].use(G.a,R.a),a["a"].axios.defaults.baseURL="http://interview.agileengine.com",a["a"].axios.interceptors.request.use((function(e){var t=K.state.auth.token;return t&&(e.headers.common["Authorization"]="Bearer "+t),e}),(function(e){return Promise.reject(e)})),a["a"].axios.interceptors.response.use((function(e){return e}),(function(e){var t=e.response?e.response.status:null;if(401===t)return K.dispatch("auth/fetchToken").then((function(){return e.config.headers["Authorization"]="Bearer "+K.state.auth.token,e.config.baseURL=void 0,a["a"].axios.request(e.config)}))}))},query:function(e,t){return a["a"].axios.get(e,{params:t}).catch((function(e){throw new Error(e)}))},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a["a"].axios.get("".concat(e,"/").concat(t)).catch((function(e){throw new Error(e)}))},post:function(e,t){return a["a"].axios.post("".concat(e),t)}},$={auth:function(){return A.post("/auth",{apiKey:"23567b218376f79d9415"})}},q={token:null},F={SET_TOKEN:function(e,t){e.token=t}},X={fetchToken:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.auth();case 3:a=t.sent,r=a.data,i=a.status,200===i&&n("SET_TOKEN",r.token);case 7:case"end":return t.stop()}}),t)})))()}},Y={namespaced:!0,state:q,actions:X,mutations:F},L={getPaginated:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return A.query("/images",{page:e})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return A.get("/images/".concat(e))}},z={images:[],pagination:{page:null,pageCount:null,hasMore:null},currentImage:null},B={SET_IMAGES:function(e,t){e.images=t.pictures,e.pagination.page=t.page,e.pagination.pageCount=t.pageCount,e.pagination.hasMore=t.hasMore},SET_CURRENT_IMAGE:function(e,t){e.currentImage=t}},U={fetchImages:function(e,t){var n=e.commit,a=e.state;return L.getPaginated(null!==t&&void 0!==t?t:a.pagination.page).then((function(e){var t=e.data;return n("SET_IMAGES",t)}))},fetchImage:function(e,t){var n=e.commit;return L.get(t).then((function(e){var t=e.data;return n("SET_CURRENT_IMAGE",t)}))},resetImage:function(e){var t=e.commit;return t("SET_CURRENT_IMAGE",null)}},H={namespaced:!0,state:z,actions:U,mutations:B};a["a"].use(c["a"]);var K=new c["a"].Store({modules:{auth:Y,images:H},plugins:[(new S["a"]).plugin]}),J=(n("501b"),n("e034"));a["a"].component("v-icon",J["a"]),a["a"].config.productionTip=!1,A.init(),new a["a"]({store:K,render:function(e){return e(M)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"71e3":function(e,t,n){"use strict";var a=n("16a8"),r=n.n(a);r.a},"9c0c":function(e,t,n){},af7d:function(e,t,n){"use strict";var a=n("e0db"),r=n.n(a);r.a},e0db:function(e,t,n){},f5fd:function(e,t,n){}});
//# sourceMappingURL=app.a50c7693.js.map